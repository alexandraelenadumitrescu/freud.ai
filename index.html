<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Transylvania Blood Network</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: "Cinzel Decorative", serif;
        background-color: #0d0d0d;
        color: #f5f5f5;
        overflow-x: hidden;
        position: relative;
        background-image: url("https://images.unsplash.com/photo-1542848906-8809e6c38b25?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D");
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
      }

      /* Overlay to darken the background image */
      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: -1;
      }

      /* NEW: Initial Welcome Overlay Styles */
      #initial-welcome-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.95); /* Foarte întunecat */
        z-index: 100000; /* Extrem de mare pentru a fi deasupra la tot */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        color: #f5f5f5;
        text-align: center;
        opacity: 1;
        transition: opacity 1s ease-in-out, visibility 1s ease-in-out;
        visibility: visible;
      }

      #initial-welcome-overlay.hidden {
        opacity: 0;
        visibility: hidden;
        pointer-events: none; /* Dezactivează interacțiunile când este ascuns */
      }

      #initial-welcome-overlay .welcome-image {
        max-width: 80%;
        max-height: 50vh; /* Ajustează după nevoie */
        border: 3px solid #e60000;
        box-shadow: 0 0 20px rgba(255, 0, 0, 0.7);
        border-radius: 8px;
        margin-bottom: 30px;
        object-fit: contain; /* Asigură că imaginea se potrivește bine */
      }

      #initial-welcome-overlay h2 {
        color: #e60000;
        font-size: 2.5em;
        margin-bottom: 15px;
        text-shadow: 0 0 10px rgba(255, 0, 0, 0.7);
      }

      #initial-welcome-overlay p {
        font-size: 1.2em;
        color: #ccc;
        margin-bottom: 40px;
        font-family: "Dancing Script", cursive; /* Un pic mai sinistru */
      }

      #initial-welcome-overlay button {
        background-color: #e60000;
        color: #f5f5f5;
        padding: 15px 30px;
        border: 2px solid #ff3333;
        border-radius: 5px;
        cursor: pointer;
        font-size: 1.3em;
        font-weight: bold;
        letter-spacing: 1px;
        transition: background-color 0.3s ease, transform 0.2s ease,
          box-shadow 0.3s ease;
      }

      #initial-welcome-overlay button:hover {
        background-color: #cc0000;
        transform: scale(1.05);
        box-shadow: 0 0 25px rgba(255, 0, 0, 0.9);
      }

      header {
        background-color: #1a1a1a;
        padding: 20px;
        text-align: center;
        font-size: 32px;
        color: #e60000;
        position: sticky;
        top: 0;
        z-index: 1000;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      /* Styles for logo */
      .header-logo {
        height: 80px;
        width: auto;
        margin-right: 15px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
      }

      nav {
        background-color: #1a1a1a;
        padding: 10px;
        text-align: center;
        position: sticky;
        top: 72px;
        z-index: 999;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
      }

      nav a {
        color: #ccc;
        margin: 0 15px;
        text-decoration: none;
        font-size: 1.1em;
        transition: color 0.3s ease;
      }

      nav a:hover {
        color: #e60000;
      }

      section {
        padding: 40px;
        max-width: 700px;
        margin: auto;
        line-height: 1.6;
        background-color: rgba(26, 26, 26, 0.8);
        border-radius: 8px;
        box-shadow: 0 0 15px rgba(230, 0, 0, 0.4);
        margin-top: 30px;
        position: relative;
        z-index: 10;
      }

      h2 {
        color: #e60000;
        text-align: center;
        margin-bottom: 25px;
        font-size: 2em;
      }

      input,
      select,
      button,
      textarea {
        padding: 12px;
        margin-top: 10px;
        width: calc(100% - 24px);
        background: #2a2a2a;
        color: #f5f5f5;
        border: 1px solid #e60000;
        border-radius: 5px;
        font-family: "Cinzel Decorative", serif;
        font-size: 1em;
        transition: background 0.3s ease, border-color 0.3s ease,
          box-shadow 0.3s ease;
      }

      input:focus,
      select:focus,
      textarea:focus {
        outline: none;
        border-color: #ff3333;
        box-shadow: 0 0 8px rgba(255, 51, 51, 0.6);
      }

      button {
        background-color: #e60000;
        cursor: pointer;
        width: 100%;
        margin-top: 20px;
        font-weight: bold;
        letter-spacing: 1px;
      }

      button:hover {
        background-color: #cc0000;
      }

      #letter {
        background-color: rgba(26, 26, 26, 0.8);
        padding: 20px;
        border: 1px dashed #e60000;
        margin-top: 20px;
        border-radius: 8px;
        box-shadow: inset 0 0 10px rgba(230, 0, 0, 0.3);
        white-space: pre-wrap;
      }

      /* New styles for handwriting effect */
      #output {
        font-family: "Dancing Script", cursive;
        font-size: 1.5em;
        color: #ccc;
        min-height: 200px;
      }

      /* Typing cursor effect */
      .typing-cursor::after {
        content: "|";
        display: inline-block;
        animation: blink-caret 0.75s infinite;
      }

      @keyframes blink-caret {
        from,
        to {
          border-color: transparent;
        }

        50% {
          border-color: #e60000;
        }
      }

      /* Styles for background bats */
      .bat {
        position: fixed;
        width: 60px;
        height: auto;
        pointer-events: none;
        opacity: 0.7;
        filter: drop-shadow(0 0 5px rgba(255, 0, 0, 0.3));
        z-index: 5;
      }

      @keyframes flyToRight {
        0% {
          transform: translateX(0vw) translateY(var(--startY)) scaleX(1);
          opacity: 0.7;
        }

        50% {
          transform: translateX(50vw) translateY(var(--midY)) scaleX(1);
        }

        100% {
          transform: translateX(100vw) translateY(var(--endY)) scaleX(1);
          opacity: 0.7;
        }
      }

      @keyframes flyToLeft {
        0% {
          transform: translateX(100vw) translateY(var(--startY)) scaleX(-1);
          opacity: 0.7;
        }

        50% {
          transform: translateX(50vw) translateY(var(--midY)) scaleX(-1);
        }

        100% {
          transform: translateX(0vw) translateY(var(--endY)) scaleX(-1);
          opacity: 0.7;
        }
      }

      /* Blood Drop Animation */
      .blood-drop {
        position: absolute;
        background-color: #e60000;
        border-radius: 50%;
        opacity: 0.8;
        pointer-events: none;
        animation: drip 1s ease-out forwards;
        filter: drop-shadow(0 0 5px rgba(255, 0, 0, 0.7));
      }

      @keyframes drip {
        0% {
          transform: translateY(0) scale(0.5);
          opacity: 0.8;
        }

        100% {
          transform: translateY(50px) scale(1);
          opacity: 0;
        }
      }

      /* Mist Effect on Scroll */
      .mist-overlay {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 0;
        background: linear-gradient(to top, rgba(230, 0, 0, 0.2), transparent);
        z-index: 20;
        pointer-events: none;
        transition: height 0.5s ease-out;
      }

      /* Mouse Glow */
      #mouse-glow {
        position: fixed;
        width: 50px;
        height: 50px;
        background-color: rgba(255, 0, 0, 0.1);
        border-radius: 50%;
        pointer-events: none;
        transform: translate(-50%, -50%);
        filter: blur(20px);
        z-index: 50;
        opacity: 0;
        transition: opacity 0.5s ease-out;
      }

      /* Sound Toggle Button */
      #sound-toggle-button {
        position: fixed;
        bottom: 20px;
        left: 20px;
        background-color: #f5f5f5;
        border: none;
        border-radius: 50%;
        width: 60px;
        height: 60px;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
        box-shadow: 0 0 15px rgba(255, 0, 0, 0.5);
        z-index: 200;
        transition: background-color 0.3s ease, transform 0.2s ease,
          box-shadow 0.3s ease;
      }

      #sound-toggle-button:hover {
        background-color: #e0e0e0;
        transform: scale(1.05);
        box-shadow: 0 0 20px rgba(255, 0, 0, 0.8);
      }

      /* Styles for sound button images */
      #sound-toggle-button img {
        width: 35px;
        height: 35px;
        display: block;
        object-fit: contain;
      }

      /* Initially hide the sound-on icon - controlled by JS display property */
      #sound-on-icon {
        display: none;
      }

      /* Styles for the "Catch Vlad" game */
      #bat-catcher-game {
        background-color: rgba(26, 26, 26, 0.8);
        border-radius: 8px;
        box-shadow: 0 0 15px rgba(230, 0, 0, 0.4);
        margin-top: 30px;
        padding: 20px;
        text-align: center;
      }

      #game-area {
        width: 100%;
        height: 300px;
        border: 2px dashed #e60000;
        margin: 20px auto;
        position: relative;
        overflow: hidden;
        background-color: rgba(0, 0, 0, 0.3);
        border-radius: 5px;
        cursor: crosshair;
      }

      /* Style for the game target image (now Vlad) */
      .game-bat {
        position: absolute;
        width: 80px;
        height: auto;
        cursor: pointer;
        transition: transform 0.1s ease-out;
        filter: drop-shadow(0 0 5px rgba(255, 0, 0, 0.5));
      }

      .game-bat:hover {
        transform: scale(1.1);
      }

      #game-info {
        display: flex;
        justify-content: space-around;
        margin-bottom: 15px;
        font-size: 1.2em;
        color: #f5f5f5;
      }

      #game-start-button {
        background-color: #008000;
        transition: background-color 0.3s ease;
      }

      #game-start-button:hover {
        background-color: #006400;
      }

      #game-start-button.disabled {
        background-color: #555;
        cursor: not-allowed;
      }

      /* Transition Overlay Styles (for game) */
      #transition-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url("dracula.jpeg");
        background-size: cover;
        background-position: center;
        z-index: 10000;
        opacity: 0;
        visibility: hidden;
        transition: opacity 1.5s ease-in-out;
      }

      /* Contact Form specific styles */
      #contact-us form label {
        display: block;
        margin-top: 15px;
        margin-bottom: 5px;
        color: #e60000;
        font-weight: bold;
      }
      #contact-us textarea {
        min-height: 120px;
        resize: vertical;
      }
      #contact-us .success-message {
        margin-top: 20px;
        padding: 15px;
        background-color: rgba(0, 128, 0, 0.3);
        border: 1px solid #008000;
        border-radius: 5px;
        color: #f5f5f5;
        text-align: center;
        font-weight: bold;
        display: none;
      }

      /* Quiz Styles */
      #vampire-quiz {
        background-color: rgba(26, 26, 26, 0.8);
        border-radius: 8px;
        box-shadow: 0 0 15px rgba(230, 0, 0, 0.4);
        margin-top: 30px;
        padding: 20px;
      }

      .quiz-question {
        background-color: rgba(42, 42, 42, 0.7);
        border: 1px solid #550000;
        border-radius: 5px;
        padding: 15px;
        margin-bottom: 20px;
        text-align: left;
      }

      .quiz-question p {
        font-size: 1.1em;
        color: #f5f5f5;
        margin-bottom: 15px;
      }

      .quiz-options {
        display: grid;
        gap: 10px;
      }

      .quiz-options label {
        display: block;
        background: #2a2a2a;
        color: #ccc;
        padding: 10px;
        border-radius: 8px;
        border: 1px solid #e60000;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .quiz-options label:hover {
        background-color: #3a0000;
        color: #fff;
      }

      .quiz-options input[type="radio"] {
        margin-right: 10px;
        accent-color: #e60000;
      }

      #submit-quiz {
        background-color: #e60000;
        cursor: pointer;
        width: 100%;
        margin-top: 20px;
        font-weight: bold;
        letter-spacing: 1px;
        padding: 12px;
        border: none;
        border-radius: 5px;
        color: #f5f5f5;
        font-family: "Cinzel Decorative", serif;
        font-size: 1em;
        transition: background-color 0.3s ease;
      }

      #submit-quiz:hover {
        background-color: #cc0000;
      }

      #quiz-result {
        margin-top: 20px;
        text-align: center;
        font-size: 1.3em;
        color: #e60000;
        font-family: "Dancing Script", cursive;
      }

      #result-description {
        margin-top: 10px;
        text-align: center;
        color: #ccc;
        font-style: italic;
      }

      .quiz-progress {
        color: #ccc;
        text-align: center;
        margin-bottom: 15px;
        font-style: italic;
      }

      .quiz-navigation {
        display: flex;
        justify-content: space-between;
        margin-top: 20px;
      }

      .quiz-navigation button {
        background-color: #550000;
        color: #f5f5f5;
        border: none;
        padding: 8px 15px;
        border-radius: 5px;
        cursor: pointer;
        font-family: "Cinzel Decorative", serif;
      }

      .quiz-navigation button:hover {
        background-color: #770000;
      }

      /* Countdown Timer Styles */
      #countdown-timer {
        background: linear-gradient(
          135deg,
          rgba(26, 26, 26, 0.95),
          rgba(42, 42, 42, 0.85)
        );
        border: 2px solid #e60000;
        border-radius: 15px;
        padding: 30px;
        text-align: center;
        box-shadow: 0 0 30px rgba(230, 0, 0, 0.6),
          inset 0 0 20px rgba(0, 0, 0, 0.8);
        position: relative;
        overflow: hidden;
      }

      #countdown-timer::before {
        content: "";
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        background: linear-gradient(45deg, #e60000, #ff3333, #cc0000, #e60000);
        border-radius: 15px;
        z-index: -1;
        animation: borderPulse 3s ease-in-out infinite;
      }

      @keyframes borderPulse {
        0%,
        100% {
          opacity: 0.7;
        }
        50% {
          opacity: 1;
        }
      }

      .countdown-title {
        font-size: 1.8em;
        color: #e60000;
        margin-bottom: 20px;
        text-shadow: 0 0 10px rgba(230, 0, 0, 0.8);
        letter-spacing: 2px;
      }

      .timer-display {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin: 20px 0;
        flex-wrap: wrap;
      }

      .time-unit {
        background: rgba(0, 0, 0, 0.8);
        border: 1px solid #e60000;
        border-radius: 10px;
        padding: 15px 10px;
        min-width: 80px;
        position: relative;
        overflow: hidden;
      }

      .time-unit::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(230, 0, 0, 0.3),
          transparent
        );
        animation: shimmer 2s infinite;
      }

      @keyframes shimmer {
        0% {
          left: -100%;
        }
        100% {
          left: 100%;
        }
      }

      .time-number {
        font-size: 2.5em;
        color: #f5f5f5;
        font-weight: bold;
        text-shadow: 0 0 15px rgba(255, 0, 0, 0.7);
        display: block;
        line-height: 1;
        animation: numberGlow 2s ease-in-out infinite alternate;
      }

      @keyframes numberGlow {
        from {
          text-shadow: 0 0 15px rgba(255, 0, 0, 0.7);
        }
        to {
          text-shadow: 0 0 25px rgba(255, 0, 0, 1),
            0 0 35px rgba(255, 0, 0, 0.5);
        }
      }

      .time-label {
        font-size: 0.9em;
        color: #ccc;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-top: 5px;
      }

      .countdown-message {
        margin-bottom: 20px;
        font-size: 1.2em;
        color: #ccc;
        font-style: italic;
        min-height: 25px;
      }

      .countdown-finished {
        animation: finishedPulse 1s ease-in-out infinite;
        color: #ff3333 !important;
        font-weight: bold;
      }

      @keyframes finishedPulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      /* Demo button to test the countdown */
      .demo-button {
        background: linear-gradient(135deg, #e60000, #cc0000);
        border: none;
        border-radius: 8px;
        padding: 12px 24px;
        color: #f5f5f5;
        font-family: "Cinzel Decorative", serif;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-top: 20px;
        width: 100%;
      }

      .demo-button:hover {
        background: linear-gradient(135deg, #ff3333, #e60000);
        box-shadow: 0 0 15px rgba(230, 0, 0, 0.8);
        transform: translateY(-2px);
      }

      /* Donation confirmation box */
      #donation-confirmation-box {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: rgba(26, 26, 26, 0.9);
        border: 2px solid #e60000;
        border-radius: 10px;
        padding: 15px;
        display: flex;
        align-items: center;
        gap: 10px;
        z-index: 500;
        box-shadow: 0 0 15px rgba(230, 0, 0, 0.7);
        opacity: 0;
        visibility: hidden;
        transform: translateY(100%);
        transition: opacity 0.5s ease-out, transform 0.5s ease-out,
          visibility 0.5s ease-out;
      }

      #donation-confirmation-box.show {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
      }

      #donation-confirmation-box img {
        width: 50px;
        height: auto;
      }

      #donation-confirmation-box p {
        margin: 0;
        color: #f5f5f5;
        font-size: 1.1em;
        font-family: "Dancing Script", cursive;
        text-shadow: 0 0 5px rgba(255, 0, 0, 0.5);
      }

      /* Responsive design */
      @media (max-width: 768px) {
        #initial-welcome-overlay .welcome-image {
          max-width: 90%;
          max-height: 40vh;
          margin-bottom: 20px;
        }
        #initial-welcome-overlay h2 {
          font-size: 1.8em;
        }
        #initial-welcome-overlay p {
          font-size: 1em;
          padding: 0 15px;
        }
        #initial-welcome-overlay button {
          font-size: 1em;
          padding: 12px 25px;
        }

        header {
          font-size: 24px;
          flex-direction: column;
        }

        .header-logo {
          height: 60px;
          margin-bottom: 10px;
          margin-right: 0;
        }

        section {
          padding: 20px;
          margin: 20px auto;
        }

        nav a {
          margin: 0 10px;
          font-size: 0.9em;
        }

        #sound-toggle-button {
          width: 50px;
          height: 50px;
          bottom: 10px;
          left: 10px;
        }

        #sound-toggle-button img {
          width: 28px;
          height: 28px;
        }

        #game-area {
          height: 200px;
        }

        #vampire-quiz {
          padding: 20px;
        }

        /* Countdown responsive styles */
        .timer-display {
          gap: 10px;
        }

        .time-unit {
          min-width: 70px;
          padding: 10px 5px;
        }

        .time-number {
          font-size: 2em;
        }

        .countdown-title {
          font-size: 1.5em;
        }

        #donation-confirmation-box {
          bottom: 10px;
          right: 10px;
          padding: 10px;
          flex-direction: column;
          text-align: center;
        }

        #donation-confirmation-box img {
          width: 40px;
        }

        #donation-confirmation-box p {
          font-size: 0.9em;
        }
      }
    </style>
  </head>

  <body>
    <div id="initial-welcome-overlay">
      <img src="dracula.jpeg" alt="Dracula Welcome" class="welcome-image" />
      <h2>Welcome to the Transylvania Blood Network.</h2>
      <p>Prepare to delve into the shadows...</p>
      <button id="enter-site-button">Enter at Your Own Risk</button>
    </div>

    <div id="bat-container"></div>
    <div id="mouse-glow"></div>
    <div class="mist-overlay" id="mist-overlay"></div>

    <div id="transition-overlay"></div>

    <audio id="bat-sound" loop>
      <source src="Toccata-and-fugue-in-d-minor.mp3" type="audio/mp3" />
      Your browser does not support the audio element.
    </audio>
    <audio id="drip-sound">
      <source src="water-drip-72357.mp3" type="audio/mp3" />
    </audio>
    <audio id="chime-sound">
      <source src="spooky-chimes-359877.mp3" type="audio/mp3" />
    </audio>
    <audio id="typing-sound">
      <source src="typewriter-100-88009.mp3" type="audio/mp3" />
      Your browser does not support the audio element.
    </audio>
    <audio id="wolf-howl-sound">
      <source src="wolf-howl.mp3" type="audio/mp3" />
      Your browser does not support the audio element.
    </audio>
    <audio id="evil-laugh-sound">
      <source src="evil-laugh-89423.mp3" type="audio/mp3" />
      Your browser does not support the audio element.
    </audio>

    <header>
      <img
        src="blood-donors-needed-halloween-dracula-volunteer-light-nikita-goel.jpg"
        alt="Transylvania Blood Network Logo"
        class="header-logo"
      />
      🩸 Transylvania Blood Network
    </header>

    <nav>
      <a href="#home">Home</a>
      <a href="#donate">Donate</a>
      <a href="#registered-donors">Donors</a>
      <a href="#facts-cravings">Secrets</a>
      <a href="#bat-catcher-game">Catch Vlad!</a>
      <a href="#vampire-quiz">Vampire Quiz</a>
      <a href="#countdown-section">Transformation</a>
      <a href="#letter">Your Letter</a>
      <a href="#contact-us">Contact</a>
      <a href="#about">About</a>
    </nav>

    <section id="home">
      <h2>Welcome</h2>
      <p>
        Transylvania Blood Network connects generous donors with those who need
        them most. But more than blood, we deliver humanity, wrapped in a veil
        of ancient mystery. Every pulse, a story. Every drop, a destiny.
      </p>
    </section>

    <section id="donate">
      <h2>Become a Donor</h2>
      <label for="name">Your Name</label>
      <input type="text" id="name" placeholder="Enter your name..." />

      <label for="group">Blood Group</label>
      <select id="group">
        <option>A+</option>
        <option>A-</option>
        <option>B+</option>
        <option>B-</option>
        <option>AB+</option>
        <option>AB-</option>
        <option>O+</option>
        <option>O-</option>
      </select>

      <button onclick="submitDonor()">Generate Letter</button>
    </section>

    <section id="registered-donors">
      <h2>Registered Donors & Blood Inventory</h2>
      <div
        id="donor-list-container"
        style="
          max-height: 300px;
          overflow-y: auto;
          border: 1px solid #e60000;
          padding: 10px;
          border-radius: 5px;
          margin-bottom: 20px;
        "
      >
        <p id="no-donors-message" style="text-align: center; color: #ccc">
          No donors registered yet.
        </p>
        <ul id="donor-list" style="list-style-type: none; padding: 0"></ul>
      </div>
      <div
        id="blood-inventory"
        style="
          background-color: rgba(42, 42, 42, 0.8);
          padding: 15px;
          border-radius: 5px;
          border: 1px solid #e60000;
        "
      >
        <h3>Current Blood Inventory:</h3>
        <p id="inventory-summary" style="color: #f5f5f5">
          No blood data available.
        </p>
      </div>
      <button
        onclick="clearAllDonors()"
        style="margin-top: 20px; background-color: #550000"
      >
        Clear All Donors (Local)
      </button>
    </section>

    <section id="facts-cravings">
      <h2>Transylvanian Secrets & Cravings</h2>

      <h3>Random Vampire Fact:</h3>
      <button onclick="displayRandomVampireFact()">Reveal a Secret</button>
      <p
        id="vampire-fact-output"
        style="margin-top: 15px; font-style: italic; color: #ccc"
      >
        Click to uncover ancient truths.
      </p>

      <h3 style="margin-top: 30px">Blood Type Craving Compatibility:</h3>
      <label for="craving-group">Select Blood Type:</label>
      <select id="craving-group">
        <option>A+</option>
        <option>A-</option>
        <option>B+</option>
        <option>B-</option>
        <option>AB+</option>
        <option>AB-</option>
        <option>O+</option>
        <option>O-</option>
      </select>
      <button onclick="getBloodCraving()">Discover Cravings</button>
      <p
        id="craving-output"
        style="margin-top: 15px; font-style: italic; color: #ccc"
      >
        What will your blood crave tonight?
      </p>
    </section>

    <section id="bat-catcher-game">
      <h2>Catch Vlad!</h2>
      <p>
        Click on Vlad Tepes as fast as you can to score points before time runs
        out!
      </p>
      <div id="game-info">
        <span id="score-display">Score: 0</span>
        <span id="timer-display">Time: 30s</span>
      </div>
      <div id="game-area"></div>
      <button id="game-start-button">Start Game!</button>
    </section>

    <section id="vampire-quiz">
      <h2>How Much Vampire Are You?</h2>
      <p class="quiz-progress" id="quiz-progress">Question 1 of 10</p>
      <div id="quiz-container"></div>
      <div class="quiz-navigation" id="quiz-navigation">
        <button id="prev-question" style="display: none">← Previous</button>
        <button id="next-question">Next →</button>
      </div>
      <button id="submit-quiz" style="display: none">
        Reveal Your True Nature
      </button>
      <div id="quiz-result"></div>
      <div id="result-description"></div>
    </section>

    <section id="countdown-section">
      <h2>Transformation Countdown</h2>
      <div id="countdown-timer">
        <div class="countdown-title">⏰ Time Until Next Blood Moon</div>

        <div class="timer-display">
          <div class="time-unit">
            <span class="time-number" id="days">00</span>
            <div class="time-label">Days</div>
          </div>
          <div class="time-unit">
            <span class="time-number" id="hours">00</span>
            <div class="time-label">Hours</div>
          </div>
          <div class="time-unit">
            <span class="time-number" id="minutes">00</span>
            <div class="time-label">Minutes</div>
          </div>
          <div class="time-unit">
            <span class="time-number" id="seconds">00</span>
            <div class="time-label">Seconds</div>
          </div>
        </div>

        <div class="countdown-message" id="countdown-message">
          Register as a donor to begin your mystical transformation countdown...
        </div>

        <button class="demo-button" onclick="startDemoCountdown()">
          🩸 Become a Donor (Demo)
        </button>
      </div>
    </section>

    <section id="letter">
      <h2>Your Letter</h2>
      <div id="output">Fill in your data above to see your letter.</div>
    </section>

    <section id="contact-us">
      <h2>Send a Message</h2>
      <p>
        Do you have a question, a secret to share, or an eerie suggestion? Send
        us a raven message!
      </p>
      <form id="contact-form">
        <label for="contact-name">Your Name</label>
        <input
          type="text"
          id="contact-name"
          placeholder="Enter your name..."
          required
        />

        <label for="contact-email">Your Email</label>
        <input
          type="email"
          id="contact-email"
          placeholder="Enter your email..."
          required
        />

        <label for="contact-message">Your Message</label>
        <textarea
          id="contact-message"
          placeholder="Type your message here..."
          required
        ></textarea>

        <button type="submit">Send Message</button>
        <div id="contact-success-message" class="success-message"></div>
      </form>
    </section>

    <section id="about">
      <h2>About</h2>
      <p>
        This web app was created in a 48h hackathon by a team of beginner
        developers from Romania. Inspired by our culture and humanity, we
        believe every drop tells a story. And perhaps, awakens something more
        primal within us all.
      </p>
    </section>

    <button id="sound-toggle-button" aria-label="Toggle Sound">
      <img
        id="sound-off-icon"
        src="haut-parleur-rouge-et-icone-sonore.png"
        alt="Sound Off"
      />
      <img
        id="sound-on-icon"
        src="icone-du-son-si-difuzor-rosu.png"
        alt="Sound On"
      />
    </button>

    <div id="donation-confirmation-box">
      <img
        src="vampire-lips-sticker-u56fd-x450.png"
        alt="Vampire Lips Sticker"
      />
      <p>YOU ARE VERY BLOODYLICIOUS</p>
    </div>

    <script>
      const templates = [
        // Original Templates
        "Dear stranger,\n\nA part of me now lives in you. In this silent exchange, I hope you find strength. May your journey be long and filled with hidden wonders.\n\n– Someone who believes in you, from the shadows.",
        "You may never know my name, but my blood runs with hope. Let this be more than survival — let it be transformation. Embrace the night.",
        "We may never meet. But in this quiet act, I've shared life. Keep moving. Keep feeling. The ancient currents flow through us all.\n\n– A quiet ally, cloaked in starlight.",
        "They say blood is thicker than water. I say it's thicker than distance, thicker than time. I'm with you. Always. A hidden guardian watches over.",
        "My veins whispered: share. So I did. You're not alone. Someone out there cares, in ways you cannot yet comprehend. Embrace the mystery.",
        // New "Funny/Weird" Templates
        "Dearest Donor,\n\nYour generosity is... intoxicating. I've already felt a peculiar urge to organize my dusty crypt collection. Coincidence? I think not. Perhaps we'll share a moonlit stroll soon.",
      ];

      // Existing variables and functions (truncated for brevity, assume they are correctly defined from your provided code)
      const batSound = document.getElementById("bat-sound");
      const dripSound = document.getElementById("drip-sound");
      const chimeSound = document.getElementById("chime-sound");
      const typingSound = document.getElementById("typing-sound");
      const wolfHowlSound = document.getElementById("wolf-howl-sound");
      const evilLaughSound = document.getElementById("evil-laugh-sound");

      const soundToggleBtn = document.getElementById("sound-toggle-button");
      const soundOnIcon = document.getElementById("sound-on-icon");
      const soundOffIcon = document.getElementById("sound-off-icon");
      let isSoundOn = false; // Initial state: sound is off

      // Play/Pause background music and manage icons
      function toggleBackgroundSound() {
        if (batSound.paused) {
          batSound.play();
          soundOnIcon.style.display = "block";
          soundOffIcon.style.display = "none";
          isSoundOn = true;
        } else {
          batSound.pause();
          soundOnIcon.style.display = "none";
          soundOffIcon.style.display = "block";
          isSoundOn = false;
        }
      }

      soundToggleBtn.addEventListener("click", toggleBackgroundSound);

      // --- Welcome Overlay Logic ---
      document.addEventListener("DOMContentLoaded", () => {
        const initialWelcomeOverlay = document.getElementById(
          "initial-welcome-overlay"
        );
        const enterSiteButton = document.getElementById("enter-site-button");

        enterSiteButton.addEventListener("click", () => {
          initialWelcomeOverlay.classList.add("hidden");
          if (!isSoundOn) {
            // Only start sound if it's currently off after clicking enter
            toggleBackgroundSound();
          }
        });
      });

      // --- Bat Animation Logic ---
      const batContainer = document.getElementById("bat-container");
      const batImageSrc =
        "cartoon-bat-silhouette-flying-bat-image-removebg-preview.png"; // Replace with your bat image path

      function createBat() {
        const bat = document.createElement("img");
        bat.src = batImageSrc;
        bat.classList.add("bat");
        batContainer.appendChild(bat);

        const startY = Math.random() * (window.innerHeight * 0.8);
        const endY = Math.random() * (window.innerHeight * 0.8);
        const midY = (startY + endY) / 2 + (Math.random() - 0.5) * 100; // Add some vertical variation
        const duration = Math.random() * 10 + 5; // 5 to 15 seconds
        const direction = Math.random() > 0.5 ? "right" : "left";

        bat.style.setProperty("--startY", `${startY}px`);
        bat.style.setProperty("--endY", `${endY}px`);
        bat.style.setProperty("--midY", `${midY}px`);

        if (direction === "right") {
          bat.style.left = "-60px"; // Start off-screen left
          bat.style.animation = `flyToRight ${duration}s linear infinite`;
        } else {
          bat.style.left = "100vw"; // Start off-screen right
          bat.style.animation = `flyToLeft ${duration}s linear infinite`;
        }

        bat.style.animationDelay = `-${Math.random() * duration}s`; // Stagger start times
        bat.style.top = `${startY}px`;

        // Remove bat after animation to prevent too many elements
        bat.addEventListener("animationiteration", () => {
          if (bat.parentElement === batContainer) {
            batContainer.removeChild(bat);
            createBat(); // Create a new bat when one finishes its cycle
          }
        });
      }

      // Create initial bats
      for (let i = 0; i < 5; i++) {
        // Adjust number of bats
        createBat();
      }

      // --- Mouse Glow Effect ---
      const mouseGlow = document.getElementById("mouse-glow");
      document.addEventListener("mousemove", (e) => {
        mouseGlow.style.left = `${e.clientX}px`;
        mouseGlow.style.top = `${e.clientY}px`;
        mouseGlow.style.opacity = "1"; // Show glow on mouse move
        clearTimeout(mouseGlow.hideTimeout);
        mouseGlow.hideTimeout = setTimeout(() => {
          mouseGlow.style.opacity = "0"; // Hide after a delay
        }, 1000);
      });

      // --- Blood Drip Effect on Click ---
      document.addEventListener("click", (e) => {
        if (isSoundOn) {
          dripSound.play();
        }
        const drop = document.createElement("div");
        drop.classList.add("blood-drop");
        drop.style.left = `${e.clientX}px`;
        drop.style.top = `${e.clientY}px`;
        document.body.appendChild(drop);

        // Remove the drop after its animation
        drop.addEventListener("animationend", () => {
          drop.remove();
        });
      });

      // --- Mist Effect on Scroll ---
      const mistOverlay = document.getElementById("mist-overlay");
      window.addEventListener("scroll", () => {
        const scrollPercentage =
          window.scrollY /
          (document.documentElement.scrollHeight - window.innerHeight);
        const maxHeight = window.innerHeight * 0.3; // Mist up to 30% of viewport height
        mistOverlay.style.height = `${scrollPercentage * maxHeight}px`;
      });

      // --- Donation Confirmation Box ---
      const donationConfirmationBox = document.getElementById(
        "donation-confirmation-box"
      );

      function showDonationConfirmation() {
        if (isSoundOn) {
          chimeSound.play();
        }
        donationConfirmationBox.classList.add("show");
        setTimeout(() => {
          donationConfirmationBox.classList.remove("show");
        }, 5000); // Hide after 5 seconds
      }

      // --- Donors List and Blood Inventory ---
      let donors = JSON.parse(localStorage.getItem("donors")) || [];
      let bloodInventory =
        JSON.parse(localStorage.getItem("bloodInventory")) || {};

      function updateDonorList() {
        const donorList = document.getElementById("donor-list");
        const noDonorsMessage = document.getElementById("no-donors-message");
        donorList.innerHTML = ""; // Clear existing list

        if (donors.length === 0) {
          noDonorsMessage.style.display = "block";
        } else {
          noDonorsMessage.style.display = "none";
          donors.forEach((donor, index) => {
            const li = document.createElement("li");
            li.style.cssText = `
          background-color: rgba(42, 42, 42, 0.5);
          border: 1px solid #550000;
          padding: 10px;
          margin-bottom: 5px;
          border-radius: 5px;
          display: flex;
          justify-content: space-between;
          align-items: center;
          font-family: 'Dancing Script', cursive;
          font-size: 1.1em;
          color: #f5f5f5;
        `;
            li.innerHTML = `
          <span>${donor.name} (${donor.group})</span>
          <button
            onclick="removeDonor(${index})"
            style="
              background-color: #800000;
              color: white;
              border: none;
              padding: 5px 10px;
              border-radius: 3px;
              cursor: pointer;
              font-size: 0.8em;
              width: auto;
              margin-top: 0;
            "
          >
            Remove
          </button>
        `;
            donorList.appendChild(li);
          });
        }
      }

      function updateBloodInventory() {
        const inventorySummary = document.getElementById("inventory-summary");
        let summaryText = "";
        const bloodTypes = Object.keys(bloodInventory).sort(); // Sort for consistent order

        if (bloodTypes.length === 0) {
          summaryText = "No blood data available.";
        } else {
          summaryText = "Available Blood:<br>";
          bloodTypes.forEach((type) => {
            summaryText += `${type}: ${bloodInventory[type]} units<br>`;
          });
        }
        inventorySummary.innerHTML = summaryText;
      }

      function removeDonor(index) {
        // Decrease blood count in inventory
        const removedDonorGroup = donors[index].group;
        if (bloodInventory[removedDonorGroup]) {
          bloodInventory[removedDonorGroup]--;
          if (bloodInventory[removedDonorGroup] <= 0) {
            delete bloodInventory[removedDonorGroup]; // Remove if 0 or less
          }
        }

        donors.splice(index, 1); // Remove donor from array
        localStorage.setItem("donors", JSON.stringify(donors));
        localStorage.setItem("bloodInventory", JSON.stringify(bloodInventory));
        updateDonorList();
        updateBloodInventory();
      }

      function clearAllDonors() {
        if (confirm("Are you sure you want to clear all donor data?")) {
          donors = [];
          bloodInventory = {};
          localStorage.removeItem("donors");
          localStorage.removeItem("bloodInventory");
          updateDonorList();
          updateBloodInventory();
        }
      }

      // --- Random Vampire Fact ---
      const vampireFacts = [
        "Vampires are often depicted as charming and sophisticated, alluring their victims with their charisma.",
        "The fear of vampires, known as vampirophobia, has existed for centuries.",
        "Garlic, silver, and holy water are commonly believed to repel vampires.",
        "The legend of vampires likely originated from ancient folklore and superstitions about death and the afterlife.",
        "Some cultures believed that animals, particularly bats and wolves, could transform into vampires.",
        "The word 'vampire' first appeared in English in 1734, in a travelogue titled 'Travels of Three English Gentlemen'.",
        "In some myths, a vampire can be destroyed by exposing it to sunlight, a stake through the heart, or decapitation.",
        "The Strigoi, a creature from Romanian mythology, shares many characteristics with vampires, including rising from the grave to harm the living.",
        "Bram Stoker's 'Dracula' (1897) is arguably the most influential vampire novel, shaping much of modern vampire lore.",
        "The 'energy vampire' is a modern concept referring to people who drain your emotional or mental energy.",
        "Transfusion is a key element in vampire survival, mirroring the life-saving nature of blood donation.",
        "In some vampire lore, vampires cannot enter a home without an invitation, a metaphor for consent.",
        "The idea of a vampire's reflection not appearing in mirrors is thought to stem from beliefs about the soul's absence.",
        "Vampires are often associated with immortality and eternal youth, though at a terrible price.",
        "Count Dracula's castle is often associated with Bran Castle in Romania, though Stoker never visited Transylvania.",
      ];

      function displayRandomVampireFact() {
        if (isSoundOn) {
          evilLaughSound.play();
        }
        const factOutput = document.getElementById("vampire-fact-output");
        const randomIndex = Math.floor(Math.random() * vampireFacts.length);
        factOutput.textContent = vampireFacts[randomIndex];
      }

      // --- Blood Type Craving Compatibility ---
      const bloodCravings = {
        "A+": "a strong desire for freshly baked bread and rich red wine.",
        "A-": "a craving for exotic fruits and moonlit dew.",
        "B+": "an insatiable hunger for spicy foods and thrilling adventures.",
        "B-": "a peculiar yen for dark chocolate and ancient texts.",
        "AB+": "a balanced craving for both savory meats and sweet pastries, with a side of mystery.",
        "AB-": "a desire for rare herbs and quiet contemplation under a starry sky.",
        "O+": "a deep longing for hearty stews and the warmth of a crackling fire.",
        "O-": "a powerful urge for raw, untamed wilderness and the thrill of the hunt.",
      };

      function getBloodCraving() {
        const cravingGroup = document.getElementById("craving-group").value;
        const cravingOutput = document.getElementById("craving-output");
        if (bloodCravings[cravingGroup]) {
          cravingOutput.textContent = `Your blood yearns for ${bloodCravings[cravingGroup]}`;
        } else {
          cravingOutput.textContent =
            "We cannot discern the cravings of this ancient blood type.";
        }
      }

      // --- Catch Vlad Game ---
      const gameArea = document.getElementById("game-area");
      const gameStartButton = document.getElementById("game-start-button");
      const scoreDisplay = document.getElementById("score-display");
      const gameTimerDisplay = document.getElementById("timer-display"); // Renamed to avoid conflict
      const vladImageSrc = "Vlad-Tepes-Dracula.png"; // Replace with your Vlad image path

      let score = 0;
      let gameTimer;
      let timeLeft = 30;
      let vladInterval;
      let isGameRunning = false;

      function spawnVlad() {
        if (!isGameRunning) return;

        // Clear any existing Vlad
        const existingVlad = document.querySelector(".game-bat");
        if (existingVlad) {
          existingVlad.remove();
        }

        const vlad = document.createElement("img");
        vlad.src = vladImageSrc;
        vlad.classList.add("game-bat");
        gameArea.appendChild(vlad);

        const areaWidth = gameArea.clientWidth;
        const areaHeight = gameArea.clientHeight;
        const vladSize = 80; // Approximate size of Vlad

        const randomX = Math.random() * (areaWidth - vladSize);
        const randomY = Math.random() * (areaHeight - vladSize);

        vlad.style.left = `${randomX}px`;
        vlad.style.top = `${randomY}px`;

        vlad.onclick = () => {
          score++;
          scoreDisplay.textContent = `Score: ${score}`;
          if (isSoundOn) {
            chimeSound.play(); // Play a sound when Vlad is caught
          }
          vlad.remove(); // Remove clicked Vlad
          spawnVlad(); // Spawn a new one immediately
        };
      }

      function startGame() {
        if (isGameRunning) return; // Prevent multiple starts
        isGameRunning = true;
        score = 0;
        timeLeft = 30;
        scoreDisplay.textContent = `Score: ${score}`;
        gameTimerDisplay.textContent = `Time: ${timeLeft}s`;
        gameStartButton.disabled = true;
        gameStartButton.classList.add("disabled");
        gameArea.innerHTML = ""; // Clear game area

        if (isSoundOn) {
          wolfHowlSound.play();
        }

        // Countdown timer for the game
        gameTimer = setInterval(() => {
          timeLeft--;
          gameTimerDisplay.textContent = `Time: ${timeLeft}s`;
          if (timeLeft <= 0) {
            endGame();
          }
        }, 1000);

        // Spawn Vlad repeatedly
        vladInterval = setInterval(spawnVlad, 1500); // Adjust spawn rate
        spawnVlad(); // Initial spawn
      }

      function endGame() {
        clearInterval(gameTimer);
        clearInterval(vladInterval);
        isGameRunning = false;
        gameStartButton.disabled = false;
        gameStartButton.classList.remove("disabled");
        gameArea.innerHTML =
          `<p>Game Over! Your final score is: ${score}</p>` + gameArea.innerHTML;
        if (isSoundOn) {
          wolfHowlSound.pause(); // Stop howling
          wolfHowlSound.currentTime = 0; // Reset for next play
          evilLaughSound.play(); // Play an evil laugh at the end
        }
      }

      gameStartButton.addEventListener("click", startGame);

      // --- Vampire Quiz ---
      const quizData = [
        {
          question: "When do you feel most energetic?",
          options: ["Daytime", "Nighttime", "Dawn/Dusk"],
          answer: "Nighttime",
        },
        {
          question: "What is your preferred beverage?",
          options: ["Water", "Coffee", "Something... red?"],
          answer: "Something... red?",
        },
        {
          question: "How do you react to garlic?",
          options: ["Love it!", "Indifferent", "A strong aversion..."],
          answer: "A strong aversion...",
        },
        {
          question: "Sunlight makes you feel...",
          options: ["Invigorated", "Neutral", "A bit... uncomfortable?"],
          answer: "A bit... uncomfortable?",
        },
        {
          question: "Your ideal diet consists of...",
          options: [
            "Balanced meals",
            "Sweets and snacks",
            "Iron-rich sustenance.",
          ],
          answer: "Iron-rich sustenance.",
        },
        {
          question: "What kind of pet would you choose?",
          options: ["Dog", "Cat", "Bat or Wolf"],
          answer: "Bat or Wolf",
        },
        {
          question: "Your natural complexion is often described as...",
          options: ["Rosy", "Normal", "Pale, even in summer."],
          answer: "Pale, even in summer.",
        },
        {
          question: "Mirrors: friend or foe?",
          options: ["Love them!", "Don't really think about it", "Unsettling."],
          answer: "Unsettling.",
        },
        {
          question: "Your favorite architectural style is...",
          options: ["Modern", "Cozy cottage", "Gothic, definitely Gothic."],
          answer: "Gothic, definitely Gothic.",
        },
        {
          question: "How do you feel about eternal life?",
          options: ["Sounds exhausting", "Intriguing, but with reservations", "Sign me up!"],
          answer: "Sign me up!",
        },
      ];

      let currentQuestionIndex = 0;
      let userAnswers = new Array(quizData.length).fill(null); // To store selected answers

      const quizContainer = document.getElementById("quiz-container");
      const quizProgress = document.getElementById("quiz-progress");
      const prevQuestionBtn = document.getElementById("prev-question");
      const nextQuestionBtn = document.getElementById("next-question");
      const submitQuizBtn = document.getElementById("submit-quiz");
      const quizResult = document.getElementById("quiz-result");
      const resultDescription = document.getElementById("result-description");

      function loadQuestion() {
        const questionData = quizData[currentQuestionIndex];
        quizContainer.innerHTML = `
          <div class="quiz-question">
            <p>${currentQuestionIndex + 1}. ${questionData.question}</p>
            <div class="quiz-options">
              ${questionData.options
                .map(
                  (option, index) => `
                <label>
                  <input type="radio" name="q${currentQuestionIndex}" value="${option}" ${
                    userAnswers[currentQuestionIndex] === option ? "checked" : ""
                  }>
                  ${option}
                </label>
              `
                )
                .join("")}
            </div>
          </div>
        `;

        // Update progress
        quizProgress.textContent = `Question ${currentQuestionIndex + 1} of ${
          quizData.length
        }`;

        // Update navigation buttons visibility
        prevQuestionBtn.style.display =
          currentQuestionIndex > 0 ? "block" : "none";
        nextQuestionBtn.style.display =
          currentQuestionIndex < quizData.length - 1 ? "block" : "none";
        submitQuizBtn.style.display =
          currentQuestionIndex === quizData.length - 1 ? "block" : "none";

        // Add event listeners for radio buttons to save answers
        quizContainer
          .querySelectorAll(`input[name="q${currentQuestionIndex}"]`)
          .forEach((radio) => {
            radio.addEventListener("change", (event) => {
              userAnswers[currentQuestionIndex] = event.target.value;
            });
          });
      }

      function nextQuestion() {
        // Save the current answer before moving
        const selectedOption = quizContainer.querySelector(
          `input[name="q${currentQuestionIndex}"]:checked`
        );
        if (selectedOption) {
          userAnswers[currentQuestionIndex] = selectedOption.value;
        }

        if (currentQuestionIndex < quizData.length - 1) {
          currentQuestionIndex++;
          loadQuestion();
        }
      }

      function prevQuestion() {
        // Save the current answer before moving
        const selectedOption = quizContainer.querySelector(
          `input[name="q${currentQuestionIndex}"]:checked`
        );
        if (selectedOption) {
          userAnswers[currentQuestionIndex] = selectedOption.value;
        }

        if (currentQuestionIndex > 0) {
          currentQuestionIndex--;
          loadQuestion();
        }
      }

      function submitQuiz() {
        // Ensure the last answer is saved
        const selectedOption = quizContainer.querySelector(
          `input[name="q${currentQuestionIndex}"]:checked`
        );
        if (selectedOption) {
          userAnswers[currentQuestionIndex] = selectedOption.value;
        }

        let score = 0;
        userAnswers.forEach((answer, index) => {
          if (answer === quizData[index].answer) {
            score++;
          }
        });

        let resultText = "";
        let descriptionText = "";

        if (score >= 8) {
          resultText = "You are a True Child of the Night!";
          descriptionText =
            "Your connection to the shadows is undeniable. Embrace your destiny as a powerful being of the night.";
          if (isSoundOn) evilLaughSound.play();
        } else if (score >= 5) {
          resultText = "You have Latent Vampire Tendencies.";
          descriptionText =
            "The ancient blood stirs within you. With a little more darkness, your true nature might awaken.";
        } else if (score >= 2) {
          resultText = "A Touch of the Macabre.";
          descriptionText =
            "While not quite a creature of the night, you certainly appreciate the darker aesthetic. Perhaps a good book on vampire lore is in order.";
        } else {
          resultText = "Purely Human (For Now).";
          descriptionText =
            "You are firmly rooted in the human world. Don't worry, we won't bite... unless you ask nicely.";
        }

        quizResult.textContent = resultText;
        resultDescription.textContent = descriptionText;
        quizContainer.innerHTML = ""; // Clear questions
        quizProgress.style.display = "none";
        prevQuestionBtn.style.display = "none";
        nextQuestionBtn.style.display = "none";
        submitQuizBtn.style.display = "none";
      }

      nextQuestionBtn.addEventListener("click", nextQuestion);
      prevQuestionBtn.addEventListener("click", prevQuestion);
      submitQuizBtn.addEventListener("click", submitQuiz);

      // Initial load for the quiz
      loadQuestion();

      // --- Countdown Timer ---
      const daysSpan = document.getElementById("days");
      const hoursSpan = document.getElementById("hours");
      const minutesSpan = document.getElementById("minutes");
      const secondsSpan = document.getElementById("seconds");
      const countdownMessage = document.getElementById("countdown-message");

      let countdownInterval;
      let targetDate; // Will be set when countdown starts

      function updateCountdown() {
        const now = new Date().getTime();
        const distance = targetDate - now;

        if (distance < 0) {
          clearInterval(countdownInterval);
          daysSpan.textContent = "00";
          hoursSpan.textContent = "00";
          minutesSpan.textContent = "00";
          secondsSpan.textContent = "00";
          countdownMessage.textContent =
            "The Blood Moon rises! Your transformation is complete.";
          countdownMessage.classList.add("countdown-finished");
          return;
        }

        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor(
          (distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)
        );
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

        daysSpan.textContent = String(days).padStart(2, "0");
        hoursSpan.textContent = String(hours).padStart(2, "0");
        minutesSpan.textContent = String(minutes).padStart(2, "0");
        secondsSpan.textContent = String(seconds).padStart(2, "0");
      }

      function startDemoCountdown() {
        // Set target date for 2 minutes from now for demo
        targetDate = new Date().getTime() + 2 * 60 * 1000;
        countdownMessage.textContent = "Your transformation begins...";
        countdownMessage.classList.remove("countdown-finished");
        clearInterval(countdownInterval); // Clear any existing interval
        countdownInterval = setInterval(updateCountdown, 1000);
        updateCountdown(); // Call immediately to avoid 1-second delay
      }

      // --- Contact Form ---
      const contactForm = document.getElementById("contact-form");
      const contactSuccessMessage = document.getElementById(
        "contact-success-message"
      );

      contactForm.addEventListener("submit", function (event) {
        event.preventDefault(); // Prevent default form submission

        const name = document.getElementById("contact-name").value;
        const email = document.getElementById("contact-email").value;
        const message = document.getElementById("contact-message").value;

        // In a real application, you would send this data to a server
        console.log("Contact Form Submitted:");
        console.log(`Name: ${name}`);
        console.log(`Email: ${email}`);
        console.log(`Message: ${message}`);

        contactSuccessMessage.textContent =
          "Message sent! We shall reach out from the shadows soon.";
        contactSuccessMessage.style.display = "block";

        // Optionally clear the form
        contactForm.reset();

        // Hide message after a few seconds
        setTimeout(() => {
          contactSuccessMessage.style.display = "none";
        }, 5000);
      });

      // --- END of existing script ---

      // ** NEW / MODIFIED JAVASCRIPT FOR YOUR REQUEST **

      // Function to submit donor data and generate letter
      function submitDonor() {
        const nameInput = document.getElementById("name");
        const groupInput = document.getElementById("group");
        const outputDiv = document.getElementById("output");
        const donorName = nameInput.value.trim();
        const bloodGroup = groupInput.value;

        if (donorName === "") {
          alert("Please enter your name, brave donor!");
          return;
        }

        const newDonor = { name: donorName, group: bloodGroup };

        // Add to donors array and update local storage
        donors.push(newDonor);
        localStorage.setItem("donors", JSON.stringify(donors));

        // Update blood inventory
        bloodInventory[bloodGroup] = (bloodInventory[bloodGroup] || 0) + 1;
        localStorage.setItem("bloodInventory", JSON.stringify(bloodInventory));

        updateDonorList();
        updateBloodInventory();
        showDonationConfirmation();

        // Generate and display the letter
        generateLetter(donorName);

        // Scroll to the letter section
        document.getElementById("letter").scrollIntoView({ behavior: "smooth" });
      }

      // Function to generate the letter with typing effect
      async function generateLetter(donorName) {
        const outputDiv = document.getElementById("output");
        const randomTemplate =
          templates[Math.floor(Math.random() * templates.length)];

        // Personalize the template with the donor's name
        const letterContent = randomTemplate.startsWith("Dear stranger,")
          ? randomTemplate.replace("Dear stranger,", `Dear ${donorName},`)
          : randomTemplate.startsWith("Dearest Donor,")
          ? randomTemplate.replace("Dearest Donor,", `Dearest ${donorName},`)
          : `Dear ${donorName},\n\n${randomTemplate}`; // Fallback for other templates

        outputDiv.textContent = ""; // Clear previous content
        outputDiv.classList.add("typing-cursor"); // Add typing cursor

        if (isSoundOn) {
          typingSound.currentTime = 0; // Rewind to start
          typingSound.play();
        }

        for (let i = 0; i < letterContent.length; i++) {
          outputDiv.textContent += letterContent.charAt(i);
          await new Promise((resolve) => setTimeout(resolve, 50)); // Typing speed
        }

        outputDiv.classList.remove("typing-cursor"); // Remove cursor after typing
        if (isSoundOn) {
          typingSound.pause();
          typingSound.currentTime = 0;
        }
      }

      // Initial calls to update lists on page load
      document.addEventListener("DOMContentLoaded", () => {
        updateDonorList();
        updateBloodInventory();
      });
    </script>
  </body>
</html>
